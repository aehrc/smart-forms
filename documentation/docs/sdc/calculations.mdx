---
sidebar_position: 4
---

import IframeContainer from '../../src/react/IframeContainer';

# Calculations

Calculations are used to dynamically calculate the value of a question based on the values of other questions.

The extensions that fall under this category are:

- [variable](http://hl7.org/fhir/uv/sdc/expressions.html#variable)
- [calculatedExpression](http://hl7.org/fhir/uv/sdc/expressions.html#calculatedExpression)
- [cqf-expression](http://hl7.org/fhir/uv/sdc/behavior.html#cqf-expression)

### Variable

Used to define a variable that is available for use in [expressions](http://hl7.org/fhir/uv/sdc/expressions.html) within the same item and any descendant items. This allows it to be consumed by calculatedExpressions when the renderer executes a calculation.

For more information, refer to http://hl7.org/fhir/uv/sdc/expressions.html#variable.

For usages, refer to the [CalculatedExpression](#calculatedexpression) section on this page.

### CalculatedExpression

The basis of calculations in SDC. Allows an item value to update continuously as the answers to dependent questions change.
In Smart Forms, calculated expressions are driven by [FHIRPath](https://hl7.org/fhir/fhirpath.html).

Not all components support calculated expressions. The following components support calculated expressions:

| Components | Limitations                                                                                                                                                |
| ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| boolean    | -                                                                                                                                                          |
| decimal    | -                                                                                                                                                          |
| integer    | -                                                                                                                                                          |
| string     | -                                                                                                                                                          |
| text       | -                                                                                                                                                          |
| choice     | Only supports the following [itemControls](https://hl7.org/fhir/extensions/CodeSystem-questionnaire-item-control.html):<br/>- radio-button<br/>- drop-down |

#### Basic usage

Basic usage examples are covered in the respective components:

- [boolean](/docs/components/boolean#advanced-usage)
- [decimal](/docs/components/decimal#advanced-usage)
- [integer](/docs/components/integer#advanced-usage)
- [string](/docs/components/string#advanced-usage)
- [text](/docs/components/text#advanced-usage)
- [choice (answerOption)](/docs/components/choice#advanced-usage)
- [choice (answerValueSet)](/docs/components/choice#advanced-usage)

#### BMI Calculation usage

<IframeContainer storyUrl="https://smartforms.csiro.au/storybook/index.html?path=/story/component-sdc-9-1-3-form-behavior-calculations--calculated-expression-bmi-calculator">
  <iframe
    src="https://smartforms.csiro.au/storybook/iframe.html?args=&id=component-sdc-9-1-3-form-behavior-calculations--calculated-expression-bmi-calculator"
    width="100%"
    height="270"
  />
</IframeContainer>

#### Absolute Cardiovascular Risk Calculation usage

<IframeContainer storyUrl="https://smartforms.csiro.au/storybook/index.html?path=/story/component-sdc-9-1-3-form-behavior-calculations--calculated-expression-cvd-risk-calculator">
  <iframe
    src="https://smartforms.csiro.au/storybook/iframe.html?args=&id=component-sdc-9-1-3-form-behavior-calculations--calculated-expression-cvd-risk-calculator"
    width="100%"
    height="920"
  />
</IframeContainer>

### Cqf-expression

While calculated expressions are used to update the value of a question dynamically, cqf-expression is used to update the elements/controls within the Questionnaire resource itself during render runtime.

At the moment, the only supported element/control is **text**.

#### Text usage

<IframeContainer storyUrl="https://smartforms.csiro.au/storybook/index.html?path=/story/component-itemtype-display--display-calculation">
  <iframe
    src="https://smartforms.csiro.au/storybook/iframe.html?args=&id=component-itemtype-display--display-calculation"
    width="100%"
    height="240"
  />
</IframeContainer>
